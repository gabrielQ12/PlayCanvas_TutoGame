"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t=0,s=0){this.x=0,this.y=0,this.x=t,this.y=s}set(t,s){return this.x=t,this.y=s,this}copy(t){return this.x=t.x,this.y=t.y,this}clone(){return new t(this.x,this.y)}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}mult(t){return this.x*=t.x,this.y*=t.y,this}multScalar(t){return this.x*=t,this.y*=t,this}div(t){return this.x/=t.x,this.y/=t.y,this}divScalar(s){return 0===s?new t(0,0):(this.x/=s,this.y/=s,this)}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){return this.divScalar(this.length())}limit(t){return this.length()>t&&(this.normalize(),this.multScalar(t)),this}distanceTo(t){return Math.sqrt(this.distanceToSq(t))}distanceToSq(t){const s=this.x-t.x,e=this.y-t.y;return s*s+e*e}}class s{constructor(t={}){var s;this.type="Material",this.opacity=1,this.opacity=null!==(s=t.opacity)&&void 0!==s?s:this.opacity}render(t){t.globalAlpha=this.opacity}}class e{constructor(s={}){var e,r,h,a;this.id=i++,this.type="Object2D",this.parent=null,this.children=[],this.position=new t,this.rotation=0,this.scale=1,this.visible=!0,this.position=null!==(e=s.position)&&void 0!==e?e:this.position,this.rotation=null!==(r=s.rotation)&&void 0!==r?r:this.rotation,this.scale=null!==(h=s.scale)&&void 0!==h?h:this.scale,this.visible=null!==(a=s.visible)&&void 0!==a?a:this.visible}add(t){return null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),this}remove(t){const s=this.children.indexOf(t);return-1!==s&&(t.parent=null,this.children.splice(s,1)),this}}let i=0;class r{constructor(){this.type="Shape"}}class h{constructor(t){this.r=1,this.g=1,this.b=1,this.setHex(t)}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,s,e){return this.r=t,this.g=s,this.b=e,this}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}}class a extends s{constructor(t={}){var s,e;super(t),this.type="ImageMaterial",this.clip=!0,this.image=new Image,this.clip=null!==(s=t.clip)&&void 0!==s?s:this.clip,this.image.src=null!==(e=t.src)&&void 0!==e?e:this.image.src}render(t){super.render(t),this.clip&&t.clip(),t.drawImage(this.image,-this.image.width/2,-this.image.height/2)}}const o=2*Math.PI;class n extends r{constructor(t={}){var s,e;super(),this.type="PolygonShape",this._faces=3,this._radius=1,this._points=[],this.faces=null!==(s=t.faces)&&void 0!==s?s:this._faces,this.radius=null!==(e=t.radius)&&void 0!==e?e:this._radius}render(t){t.beginPath(),t.moveTo(this._points[0][0],this._points[0][1]);for(let s=1,e=this._points.length;s<e;s++)t.lineTo(this._points[s][0],this._points[s][1]);t.closePath()}update(){const s=o/this._faces;this._points=[];for(let e=0,i=this._faces;e<i;e++){const i=new t(Math.cos(e*s),Math.sin(e*s)).multScalar(this._radius);this._points.push([i.x,i.y])}}set faces(t){if(t<3)throw new Error("Polygon must have at least 3 faces");this._faces=t,this.update()}get faces(){return this._faces}set radius(t){if(t<0)throw new Error("Radius must be greater than 0");this._radius=t,this.update()}get radius(){return this._radius}}exports.BasicMaterial=class extends s{constructor(t={}){var s;super(t),this.type="BasicMaterial",this.wireframe=!1,this.color=new h(0),this.wireframe=null!==(s=t.wireframe)&&void 0!==s?s:this.wireframe,this.color=t.color?new h(t.color):this.color}render(t){super.render(t),this.wireframe?(t.strokeStyle=this.color.getStyle(),t.stroke()):(t.fillStyle=this.color.getStyle(),t.fill())}},exports.BoxShape=class extends r{constructor(t={}){var s,e;super(),this.type="BoxShape",this.width=1,this.height=1,this.width=null!==(s=t.width)&&void 0!==s?s:this.width,this.height=null!==(e=t.height)&&void 0!==e?e:this.height}render(t){t.beginPath(),t.rect(.5*-this.width,.5*-this.height,this.width,this.height),t.closePath()}},exports.Camera=class{constructor(s){this.type="camera",this.position=new t,this.rotation=0,this.zoom=1}},exports.Canvas=class{constructor(){this.element=document.createElement("canvas"),this.autoClear=!0}setSize(t,s){this.element.width=t,this.element.height=s,this.element.style.width=t+"px",this.element.style.height=s+"px"}clear(){const t=this.element.getContext("2d");t&&t.clearRect(0,0,this.element.width,this.element.height)}render(t,s){const e=this.element.getContext("2d");null!==e&&(this.autoClear&&this.clear(),e.save(),e.translate(s.position.x,s.position.y),e.rotate(s.rotation),e.scale(s.zoom,s.zoom),t.render(e),e.restore())}setSmoothing(t){const s=this.element.getContext("2d");s&&(s.imageSmoothingEnabled=t)}},exports.CircleShape=class extends r{constructor(t={}){var s;super(),this.type="CircleShape",this.radius=1,this.radius=null!==(s=t.radius)&&void 0!==s?s:this.radius}render(t){t.beginPath(),t.arc(0,0,this.radius,0,o),t.closePath()}},exports.Color=h,exports.ImageMaterial=a,exports.Material=s,exports.Mesh=class extends e{constructor(t,s,e){super(e),this.type="Mesh",this.children=[],this.shape=t,this.material=s}render(t){this.rotation%=o,this.visible&&(t.save(),t.scale(this.scale,this.scale),t.translate(this.position.x,this.position.y),t.rotate(this.rotation),this.shape.render(t),this.material.render(t),t.restore())}},exports.Object2D=e,exports.PolygonShape=n,exports.Scene=class extends e{constructor(){super(...arguments),this.type="Scene",this.children=[]}render(t,s){for(let e=0,i=(s=s||this.children).length;e<i;e++)s[e].render(t),this.render(t,s[e].children)}},exports.Shape=r,exports.SpriteMaterial=class extends a{constructor(t={}){var s,e,i,r,h,a;super(t),this.type="SpriteMaterial",this.frameStart=1,this.frameCount=1,this.frameRate=1,this.frameSize=[1,1],this.frameOffset=[0,0],this.loop=!0,this.frameStart=null!==(s=t.frameStart)&&void 0!==s?s:this.frameStart,this.frameCount=null!==(e=t.frameCount)&&void 0!==e?e:this.frameCount,this.frameRate=null!==(i=t.frameRate)&&void 0!==i?i:this.frameRate,this.frameSize=null!==(r=t.frameSize)&&void 0!==r?r:this.frameSize,this.frameOffset=null!==(h=t.frameOffset)&&void 0!==h?h:this.frameOffset,this.loop=null!==(a=t.loop)&&void 0!==a?a:this.loop}render(t){s.prototype.render.call(this,t),this.frameStart+=1/this.frameRate,this.frameStart%=this.frameCount;const e=this.frameOffset[0],i=this.frameOffset[1],r=this.frameSize[0],h=this.frameSize[1];t.drawImage(this.image,e+(0|this.frameStart)*r,i,r,h,-.5*r,-.5*h,r,h)}},exports.TriangleShape=class extends n{constructor(t={}){super({...t,faces:3}),this.type="TriangleShape"}set faces(t){if(3!==t)throw new Error("TriangleShape can only have 3 faces.");this._faces=t}},exports.Vector2=t;
//# sourceMappingURL=canevas.cjs.map
